# External Integrations

**Analysis Date:** 2026-02-17

## Frameworks & Services

**Claude Code Integration:**
- Integration: Deep integration with Claude Code environment
- Purpose: Command definitions, agent spawning, tool access (Read, Write, Edit, Bash, Task, Glob, Grep)
- Entry point: `/autopilot` command and subcommands
- Agent spawning: Tier-2 phase-runners spawn Tier-3 step agents via Task tool (gsd-phase-researcher, gsd-planner, gsd-executor, gsd-verifier, gsd-debugger, gsd-plan-checker)

**GSD (get-shit-done-cc) Framework:**
- Version: >= 1.15.0 (enforced in `bin/install.js` with compareVersions check)
- Purpose: Provides the complete phase execution framework and step agent types
- Dependency check: Performed at install time and on every phase execution
- How it's called: Phase-runners spawn GSD agent types via Task tool (not direct imports)
- What it provides:
  - Step agents: gsd-phase-researcher, gsd-planner, gsd-executor, gsd-verifier, gsd-plan-checker, gsd-debugger
  - `.planning/` directory structure and ROADMAP.md parsing
  - Requirements specification and frozen spec format
  - Phase success criteria framework
- Location check: `{install_target}/get-shit-done/VERSION` must exist and version must be >= 1.15.0

## External APIs & Version Services

**npm Registry:**
- Service: Package distribution and version checking
- Purpose: Update checking and package installation
- Implementation: `src/hooks/autopilot-check-update.js`
  - Command: `npm view autopilot-cc version` (called with 10-second timeout)
  - Run context: Background process spawned on SessionStart hook
  - Cache: Result stored in `~/.claude/cache/autopilot-update-check.json`
- Error handling: Graceful degradation if npm unavailable or timeout occurs

## Local Storage & State Management

**File System Storage:**
- Installation directory: `~/.claude/` (global) or `./.claude/` (project-local)
  - Commands: `commands/autopilot.md`, `commands/autopilot/*.md`
  - Agents: `agents/autopilot-*.md`
  - Protocols: `autopilot/protocols/*.md`
  - Hooks: `hooks/autopilot-check-update.js`
  - Version: `autopilot/VERSION`

- Cache directory: `~/.claude/cache/`
  - `autopilot-update-check.json` - Update check result (24-hour TTL)

- Project state: `.autopilot/` directory (created at first phase run)
  - `state.json` - Single source of truth for phase execution state
  - `state.json.backup` - Backup written before each state update
  - `repo-map.json` - Semantic codebase map (generated by orchestrator)
  - `context-map.json` - Context mapping results (from `--map` flag)
  - `phases/{phase_id}/` - Per-phase directories (RESEARCH.md, PLAN.md, EXECUTION-LOG.md, etc.)
  - `archive/` - Completed run archives

- Manifest: `autopilot-file-manifest.json` at install target
  - Tracks all installed files with SHA256 hashes
  - Used for integrity verification and uninstall cleanup

## Settings Integration

**Claude Code Settings:**
- File: `~/.claude/settings.json` or `./.claude/settings.json`
- Integration: SessionStart hook registration
- Hook command: `node "{install_target}/hooks/autopilot-check-update.js"`
- Hook type: Session lifecycle hook (runs once at session start)
- Deduplication: Installer checks for existing hook before adding (prevents duplicates)
- Removal: Uninstall script removes hook entry and cleans up empty hook arrays

## No External Database/Backend

**Important:** This is a local-only system:
- No cloud database required
- No remote API calls except npm version check
- No authentication services (relies on user's Claude Code session)
- No external logging or analytics
- No third-party deployment platforms

## Dependency on GSD Step Agents

The following GSD agent types are spawned by phase-runners:

| GSD Agent Type | Called by | Purpose | When Used |
|---|---|---|---|
| `gsd-phase-researcher` | phase-runner step 1 | Research phase requirements and codebase | All phases (unless skip_research flag) |
| `gsd-planner` | phase-runner step 2 | Create detailed task breakdown from research | All phases (unless existing_plan) |
| `gsd-plan-checker` | phase-runner step 2.5 | Validate plan completeness and feasibility | All phases (unless skip) |
| `gsd-executor` | phase-runner step 3 | Execute tasks, write code, make commits | All phases (unless verify_only routing) |
| `gsd-verifier` | phase-runner step 4 | Verify phase completion against acceptance criteria | All phases |
| `gsd-debugger` | phase-runner step 5a | Fallback debugger if autopilot-debugger unavailable | On phase failure |

## Fallback Behavior

If GSD agents are unavailable:
- Phase execution halts with error (no fallback to general-purpose agents)
- Orchestrator logs the error and moves to next phase or checkpoint
- User must install/update GSD and restart session

If autopilot-debugger agent is unavailable:
- Phase-runner attempts to spawn `gsd-debugger` instead
- If both unavailable, debugging step is skipped and phase marked as failed

## Environment Variable Requirements

**No environment variables required** for autopilot-cc itself. Configuration comes from:
1. `.planning/config.json` (created by GSD) - Project configuration including visual testing settings
2. `.planning/ROADMAP.md` (created by GSD) - Phase roadmap and specifications
3. `.planning/requirements.md` (created by GSD) - Frozen requirement specification
4. `.autopilot/state.json` - Execution state (created at first phase run)

## No Secrets Management

**Important security note:**
- No `.env` files or secret files are used by autopilot-cc
- No API keys, database passwords, or credentials are stored
- No authentication token rotation or secret expiration
- Installation and operation is fully stateless except for local phase execution state

---

*Integration audit: 2026-02-17*
